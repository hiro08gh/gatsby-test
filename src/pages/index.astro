---
import Layout from '@/layouts/Layout.astro';
import Link from "@/components/Link.astro";
import Profile from '@/components/Profile.astro'
import { getArticles } from "@/libs/api";

const res = await getArticles({ fields: ["id", "title", "description", "thumbnail"], limit: 5});
---

<Layout title="hiro08.com">
	<Profile />

  <div class="flex flex-col gap-20">
    <article class="flex flex-col gap-8">
      <header class="flex w-full flex-row justify-between gap-2">
        <h3 class="text-lg text-neutral-100">Articles</h3>
        <Link href="/articles" label="Read All Articles" isUnderline target="_self" />
      </header>
      {res.contents.length === 0 && <p>Soon, stay connected ðŸ‘€...</p>}

      <section class="flex flex-col gap-4 md:flex-row md:flex-wrap">
      {
        res.contents.map((article: any) => (
          <a
            class="group flex flex-col gap-2 border-t border-neutral-700 py-4 transition-all hover:text-neutral-100"
            href={`/articles/${article.id}`}
          >
          <div class="flex items-center justify-between">
            <div>
              <h2 class="text-lg mb-1">{article.title}</h2>
							<p class="mb-3">{article.description}</p>
            </div>
          <img
            src={article.thumbnail?.url + "?w=300&h=300&fit=fill&fm=webp"}
            class="w-1/6 self-center"
            alt="Your Profile"
          />
            </div>
          </a>
        ))
      }
      </section>
    </article>
  </div>
</Layout>